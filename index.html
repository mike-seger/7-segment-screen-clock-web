<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="style.css">
</head>

<body>
<div id="menuButton">≡</div>
<div id="menuPlaceholder"></div>

<div id="clock">
    <div id="dateLine">
        <span id="weekday" class="alpha-group"></span>
        <span id="day" class="numeric-group"></span>
        <span id="month" class="alpha-group"></span>
        <span id="year" class="numeric-group"></span>
    </div>

    <div id="timeLine">
        <span id="hour" class="numeric-group"></span>
        <span id="colon-min" class="numeric-group">:</span>
        <span id="minute" class="numeric-group"></span>
        <span id="colon-sec" class="numeric-group">:</span>
        <span id="sec" class="numeric-group"></span>
    </div>
</div>

<script>
// ---------------- CLOCK UPDATE ----------------

const days   = ["SUN","MON","TUE","WED","THU","FRI","SAT"];
const months = ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];

function updateClock() {
    const now = new Date();
    const h = String(now.getHours());
    const m = String(now.getMinutes()).padStart(2, "0");
    const s = String(now.getSeconds()).padStart(2, "0");

    document.getElementById("hour").textContent     = h;
    document.getElementById("minute").textContent   = m;
    document.getElementById("sec").textContent      = s;

    document.getElementById("weekday").textContent  = days[now.getDay()];
    document.getElementById("day").textContent      = String(now.getDate()).padStart(2, "0");
    document.getElementById("month").textContent    = months[now.getMonth()];
    document.getElementById("year").textContent     = String(now.getFullYear());
}

async function toggleFullscreen() {
  // If already in fullscreen → exit
  if (document.fullscreenElement) {
    await document.exitFullscreen();
    return;
  }

  // If not in fullscreen → enter
  const el = document.documentElement;   // whole page, or choose a smaller element
  if (el.requestFullscreen) {
    await el.requestFullscreen();
  }
}

setInterval(updateClock, 250);
updateClock();
document.getElementById("year").addEventListener("click", toggleFullscreen);
document.addEventListener("contextmenu", e => { e.preventDefault(); });

(async function showClockWhenFontReady() {
  // Ensure full page has loaded
  if (document.readyState !== "complete") {
    await new Promise(resolve =>
      window.addEventListener("load", resolve, { once: true })
    );
  }

  // Now explicitly request the font used in #clock
  try {
    // size can be anything, but must be realistic CSS font-size syntax
    await document.fonts.load('80px "Digital7Mono"');
    // Optionally, you can wait for *all* fonts as well:
    // await document.fonts.ready;
  } catch (e) {
    console.warn("Digital7Mono load error (API-level):", e);
  }

  // Finally show the clock
  const clock = document.getElementById("clock");
  if (clock) {
    clock.style.display = "block";
  }
})();

</script>

<!-- Configuration -->
<!-- <script src="configuration/persistedState.js"></script>
<script src="configuration/cofiguration.js"></script>
<script src="configuration/menu.js"></script>
<link rel="stylesheet" href="fonts/fonts.css"> -->

</body>
</html>
