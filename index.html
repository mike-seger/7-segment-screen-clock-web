<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<!-- Load font definitions -->
<link rel="stylesheet" href="fonts/fonts.css">

<style>
    :root {
        --on-color: #00ff5a;
        --bg: #000;
    }

    body {
        background: var(--bg);
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: var(--on-color);
        /* font-family: "DSEG7Classic", monospace; */
    }

    #clock {
        text-align: center;
    }

    #menuButton {
        position: fixed;
        right: 20px;
        top: 20px;
        font-size: 34px;
        cursor: pointer;
        user-select: none;
        color: var(--on-color);
    }

    #menuPanel {
        position: fixed;
        right: 20px;
        top: 70px;
        background: #111;
        border: 1px solid #333;
        padding: 12px;
        border-radius: 8px;
        display: none;
        color: var(--on-color);
    }

    #fontSelect {
        background: #000;
        color: var(--on-color);
        border: 1px solid #333;
        padding: 4px;
        width: 180px;
    }

    #date {
        font-size: 4vmin;
        margin-bottom: 4vmin;
    }

    #time {
        font-size: 25vmin;
        white-space: nowrap;
    }

    #sec {
        font-size: 11vmin;
        padding-left: 2vmin;
    }
</style>
</head>

<body>

<div id="menuButton">â‰¡</div>

<div id="menuPanel">
    <label>Font:</label><br>
    <select id="fontSelect"></select>
</div>

<div id="clock">
    <div id="date"></div>
    <div id="time"><span id="main"></span><span id="sec"></span></div>
</div>

<script>
// ---- TIME UPDATE ----
function updateClock() {
    const now = new Date();
    const h = String(now.getHours()).padStart(2,"0");
    const m = String(now.getMinutes()).padStart(2,"0");
    const s = String(now.getSeconds()).padStart(2,"0");

    document.getElementById("main").textContent = `${h}:${m}`;
    document.getElementById("sec").textContent  = `:${s}`;

    const days  = ["SUN","MON","TUE","WED","THU","FRI","SAT"];
    const months= ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];

    document.getElementById("date").textContent =
        `${days[now.getDay()]}  ${String(now.getDate()).padStart(2,"0")} ${months[now.getMonth()]} ${now.getFullYear()}`;
}
setInterval(updateClock, 250);
updateClock();


// ---- MENU ----
document.getElementById("menuButton").onclick = () => {
    const p = document.getElementById("menuPanel");
    p.style.display = (p.style.display === "block" ? "none" : "block");
};


// ---- DYNAMIC FONT DISCOVERY ----
// Load fonts.css as text and extract each font-family:
fetch("fonts/fonts.css")
    .then(r => r.text())
    .then(cssText => {
        const fontFamilies = Array.from(cssText.matchAll(/font-family:\s*["']([^"']+)["']/g))
                                  .map(m => m[1]);
        populateFontMenu(fontFamilies);
    });

function populateFontMenu(list) {
    const select = document.getElementById("fontSelect");
    select.innerHTML = "";

    list.forEach(font => {
        const opt = document.createElement("option");
        opt.value = font;
        opt.textContent = font;
        select.appendChild(opt);
    });

    select.value = getComputedStyle(document.body).fontFamily.replace(/["']/g,"");

    select.onchange = () => {
        document.body.style.fontFamily = `"${select.value}", monospace`;
    };
}
</script>
</body>
</html>
